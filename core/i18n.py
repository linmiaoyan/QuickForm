"""
国际化支持模块
提供中英文翻译功能
"""
from flask import session

# 翻译字典
TRANSLATIONS = {
    'zh': {
        # 导航栏
        'nav.home': '首页',
        'nav.docs': '官方文档',
        'nav.tutorials': '开源教程',
        'nav.cases': '精品案例',
        'nav.community': '项目交流',
        'nav.dashboard': '仪表盘',
        'nav.create_task': '创建任务',
        'nav.admin': '管理员',
        'nav.login': '登录',
        'nav.register': '注册',
        'nav.profile': '个人设置',
        'nav.logout': '退出登录',
        'nav.admin_panel': '管理员面板',
        
        # 首页
        'home.welcome': '欢迎使用 QuickForm',
        'home.subtitle': '简易高效的表单数据回收系统，专为大模型生成的交互网页设计',
        'home.quick_start': '快速开始',
        'home.step1': '1. 注册账号或登录系统',
        'home.step2': '2. 创建新的数据任务，获取唯一URL',
        'home.step3': '3. 将URL集成到您的网页中，接收表单提交',
        'home.step4': '4. 在仪表盘查看和分析收集的数据',
        'home.enter_dashboard': '进入仪表盘',
        'home.register_now': '立即注册',
        'home.login': '已有账号？登录',
        'home.about': '关于 QuickForm',
        'home.about_intro': 'QuickForm是一款基于Web的智能表单管理服务，由温州科技高中AI科创中心团队与温州大学联合开发。其主要功能是简化数据收集、分析和报告生成的全流程，具体特点如下：',
        'home.form_management': '表单管理',
        'home.form_management_desc': '支持创建自定义表单，涵盖多种问题类型（如选择题、填空题、简答题等），用户可灵活编辑和管理表单内容，查看表单详情及统计信息。',
        'home.data_collection': '数据收集',
        'home.data_collection_desc': '通过生成唯一的URL地址，将AI生成的交互网页或静态表单与QuickForm系统关联，实现数据的集中收集。用户提交的数据会实时存储在系统中，便于后续处理。',
        'home.data_analysis': '数据分析',
        'home.data_analysis_desc': '具备智能分析功能，能自动识别数据中的趋势、模式和关键洞察，生成可视化图表（如柱状图、饼图、折线图等）和数据摘要，帮助用户快速了解数据分布和特征。',
        'home.report_generation': '报告生成',
        'home.report_generation_desc': '根据分析结果自动生成详细的HTML格式报告，支持自定义报告模板和样式，用户可下载或保存报告，用于教学评估、研究分析等场景。',
        'home.ai_integration': 'AI集成',
        'home.ai_integration_desc': '结合AI技术进行深度数据分析，提供智能洞察和建议，例如自动识别学生学习中的薄弱环节、预测学习效果等，辅助教师优化教学策略。',
        'home.applicable_scenarios': 'QuickForm适用于教育领域（如课堂测验、学习评估）、市场调研、问卷调查等多种场景，尤其适合需要快速收集和分析大量数据的场景，帮助用户高效完成数据管理任务。',
        
        # 通用
        'common.loading': '加载中...',
        'common.submit': '提交',
        'common.cancel': '取消',
        'common.confirm': '确认',
        'common.delete': '删除',
        'common.edit': '编辑',
        'common.view': '查看',
        'common.save': '保存',
        'common.back': '返回',
        'common.close': '关闭',
        'common.search': '搜索',
        'common.filter': '筛选',
        'common.actions': '操作',
        'common.status': '状态',
        'common.created_at': '创建时间',
        'common.updated_at': '更新时间',
        
        # 页面占位
        'page.coming_soon': '内容即将上线...',
        'page.under_construction': '正在建设中...',
        
        # 语言切换
        'lang.switch': '语言',
        'lang.chinese': '中文',
        'lang.english': 'English',
        
        # 通用（视频相关）
        'common.browser_not_support_video': '您的浏览器不支持视频播放。',
        
        # Base模板
        'base.home': '主页',
        'base.title': 'QuickForm - 简易表单数据回收系统',
        'base.toggle_nav': '切换导航',
        'base.footer': '简易表单数据回收系统',
        'base.close': '关闭',
        'base.copy': '复制',
        'base.copied': '已复制',
        
        # Dashboard页面
        'dashboard.title': '仪表盘',
        'dashboard.my_tasks': '我的数据任务',
        'dashboard.task_list': '任务列表',
        'dashboard.certified_teacher': '认证教师',
        'dashboard.task_count_unlimited': '任务创建数量：无限制（当前 {count} 个）',
        'dashboard.task_count': '您已创建 {current} / {limit} 个任务',
        'dashboard.reached_limit': '已达到上限',
        'dashboard.create_new_task': '创建新任务',
        'dashboard.no_description': '暂无描述',
        'dashboard.created_at': '创建时间',
        'dashboard.submission_count': '提交数量',
        'dashboard.data_url': '数据接口地址（URL）',
        'dashboard.view_post_prompt': '查看POST提示词',
        'dashboard.post_instruction': '生成应用后，通过POST指令提交数据到以下URL：',
        'dashboard.post_instruction_detail': '生成应用后，产生的数据用以下方法传到服务器：',
        'dashboard.copy_prompt': '复制提示词',
        'dashboard.view_detail': '查看详情',
        'dashboard.export': '导出',
        'dashboard.analyze': '分析',
        'dashboard.confirm_delete': '确认删除',
        'dashboard.delete_confirm_message': '确定要删除任务 "{title}" 吗？此操作无法撤销，相关的所有提交数据也将被删除。',
        'dashboard.confirm_delete_btn': '确认删除',
        'dashboard.no_tasks': '还没有创建任何数据任务',
        'dashboard.no_tasks_desc': '点击下方按钮创建您的第一个数据任务',
        'dashboard.create_task': '创建任务',
        
        # Login页面
        'login.title': '登录',
        'login.header': '用户登录',
        'login.username': '用户名',
        'login.username_placeholder': '请输入您的用户名',
        'login.password': '密码',
        'login.password_placeholder': '请输入您的密码',
        'login.remember': '记住我',
        'login.submit': '登录',
        'login.no_account': '还没有账号？',
        'login.register_link': '立即注册',
        
        # Register页面
        'register.title': '注册',
        'register.header': '用户注册',
        'register.username': '用户名',
        'register.username_placeholder': '请输入用户名',
        'register.email': '邮箱',
        'register.email_placeholder': '请输入邮箱地址',
        'register.school': '学校',
        'register.school_placeholder': '请输入学校名称',
        'register.phone': '手机号',
        'register.phone_placeholder': '请输入11位手机号',
        'register.phone_hint': '请输入11位手机号码（以1开头，第二位为3-9）',
        'register.password': '密码',
        'register.password_placeholder': '请输入密码',
        'register.privacy_note': '隐私说明：',
        'register.privacy_desc': '以上信息仅用于后续发布更新信息或交流拉群，不会外泄。',
        'register.submit': '注册',
        'register.has_account': '已有账号？',
        'register.login_link': '立即登录',
        'register.required': '*',
        
        # Create Task页面
        'create_task.title': '创建任务',
        'create_task.header': '创建数据任务',
        'create_task.task_title': '任务标题',
        'create_task.task_title_placeholder': '请输入任务标题',
        'create_task.task_title_hint': '请为您的数据回收任务设置一个描述性的标题',
        'create_task.description': '任务描述（可选）',
        'create_task.description_placeholder': '请输入任务描述',
        'create_task.description_hint': '添加描述可以帮助您更好地管理和识别不同的任务',
        'create_task.after_create': '创建任务后，您将获得：',
        'create_task.after_create_item1': '一个唯一的提交URL，用于接收表单数据',
        'create_task.after_create_item2': '数据管理和分析工具',
        'create_task.after_create_item3': '导出数据功能',
        'create_task.after_create_item4': '文件管理能力（上传的文件将与任务关联）',
        'create_task.submit': '创建任务',
        'create_task.guide_title': '使用指南',
        'create_task.how_to_use': '如何在您的网页中使用提交URL：',
        'create_task.html_example': 'HTML表单示例',
        'create_task.js_example': 'JavaScript提交示例',
        
        # Profile页面
        'profile.title': '个人设置',
        'profile.header': '个人设置',
        'profile.certified': '已认证教师：',
        'profile.certified_desc': '您的账号已完成教师身份认证，任务创建不再受限，上传的 HTML 页面将自动公开访问。',
        'profile.certified_at': '通过时间：',
        'profile.cert_reviewing': '认证审核中：',
        'profile.cert_reviewing_desc': '我们已于 {time} 收到您的认证材料，请耐心等待管理员审核。',
        'profile.view_detail': '查看详情',
        'profile.cert_rejected': '认证未通过：',
        'profile.cert_rejected_desc': '管理员反馈：{note}。请准备更充分的材料后重新提交。',
        'profile.reapply': '重新发起认证',
        'profile.not_certified': '尚未认证：',
        'profile.not_certified_desc': '提交教师身份认证可解除任务数量限制，并跳过 HTML 页面人工审核。',
        'profile.apply_cert': '发起认证',
        'profile.personal_info': '个人信息',
        'profile.ai_config': 'AI配置',
        'profile.change_password': '密码修改',
        'profile.username': '用户名',
        'profile.email': '邮箱',
        'profile.school': '学校',
        'profile.phone': '手机号',
        'profile.phone_hint': '请输入11位手机号码',
        'profile.save_info': '保存个人信息',
        'profile.select_model': '选择AI模型',
        'profile.model_chat_server': '硅基流动（默认）',
        'profile.model_deepseek': 'DeepSeek',
        'profile.model_doubao': '豆包',
        'profile.model_qwen': '阿里云百炼',
        'profile.chat_server_config': '硅基流动 配置',
        'profile.api_url': 'API 地址（可选）',
        'profile.api_url_placeholder': '例如：https://your.chatserver/api/chat',
        'profile.api_url_hint': '不填则使用系统默认地址',
        'profile.api_token': 'API Token（可选）',
        'profile.api_token_placeholder': '请填写你的专属Token',
        'profile.api_token_hint': '不填则使用系统默认Token',
        'profile.deepseek_config': 'DeepSeek 配置',
        'profile.deepseek_api_key': 'API Key',
        'profile.deepseek_api_key_hint': '请输入您的DeepSeek API密钥',
        'profile.doubao_config': '豆包 配置',
        'profile.doubao_api_key': 'API Key',
        'profile.qwen_config': '阿里云百炼 配置',
        'profile.qwen_api_key': 'API Key',
        'profile.qwen_api_key_hint': '请输入您的阿里云百炼 API密钥',
        'profile.save_config': '保存配置',
        'profile.api_test': 'API 连通性测试',
        'profile.api_test_desc': '保存配置后，可通过下方快速测试按钮确认模型接口是否可正常响应。',
        'profile.test_prompt': '测试提示词（可选）',
        'profile.test_prompt_placeholder': '例如：请回复"OK"，用于连通性测试。',
        'profile.test_api': '测试接口',
        'profile.testing': '测试中…',
        'profile.test_note': '若修改了上方配置，请先点击"保存配置"，再进行连通性测试。',
        'profile.current_password': '当前密码',
        'profile.new_password': '新密码',
        'profile.new_password_hint': '密码长度至少为6个字符',
        'profile.confirm_password': '确认新密码',
        'profile.change_password_btn': '修改密码',
        'profile.config_guide_title': '配置说明',
        'profile.config_guide_desc1': '配置完成AI模型后，您可以在任务分析页面使用智能分析功能。智能分析将根据您的表单数据和附件内容，生成详细的分析报告。',
        'profile.config_guide_desc2': '请注意保护您的API密钥安全，避免泄露。数据将通过安全通道发送至AI模型进行分析。',
        
        # JavaScript消息
        'js.only_html': '仅支持上传HTML或HTM格式的文件',
        'js.file_too_large': '文件大小超过16MB限制',
        'js.file_selected': '已选择',
        'js.upload_failed': '上传失败',
        'js.upload_failed_check': '上传失败，请检查文件格式和大小',
        'js.http_error': '上传失败，HTTP状态码',
        'js.network_error': '网络错误，上传失败。请检查网络连接后重试。',
        'js.upload_timeout': '上传超时，请检查网络连接后重试。',
        'js.copy_success': '✅ 已复制',
        'js.test_failed': '测试失败，请检查配置',
        'js.test_success': '请求成功',
        'js.test_error': '测试失败，请稍后重试',
        'js.interface_no_response': '接口无响应',
        
        # Task Detail页面
        'task_detail.export_data': '导出数据',
        'task_detail.analyze': '数据分析',
        'task_detail.edit_task': '编辑任务',
        'task_detail.back_to_list': '返回列表',
        'task_detail.task_info': '任务信息',
        'task_detail.created_at': '创建时间',
        'task_detail.submission_count': '提交数量',
        'task_detail.description': '任务描述',
        'task_detail.select_file': '选择文件',
        'task_detail.uploaded_file': '已上传文件',
        'task_detail.remove_file': '删除此文件',
        'task_detail.drag_drop': '拖拽文件到此处上传，或',
        'task_detail.html_file': 'HTML文件',
        'task_detail.show_qrcode': '显示二维码',
        'task_detail.review_rejected': '页面审核结果：已被拒绝。原因：',
        'task_detail.review_pending': '页面正在审核中，暂时无法公开访问。审核不影响数据回收，本地浏览器打开网页就可以正常提交数据。在个人中心完成教师认证后，所有上传页面免审核。',
        'task_detail.no_html_file': '尚未上传HTML文件。如需上传，请前往',
        'task_detail.edit_task_link': '编辑任务',
        'task_detail.page': '页面。',
        'task_detail.rate_limit_title': '条封禁记录',
        'task_detail.rate_limit_alert': '系统提醒：检测到短时间内来自部分 IP 的异常提交，已自动暂时阻断。',
        'task_detail.post_prompt_title': '提交代码提示词',
        'task_detail.post_instruction': '生成应用后，通过POST指令提交数据到以下URL：',
        'task_detail.data_url_label': '数据接口地址（URL）：',
        'task_detail.copy_url': '复制URL',
        'task_detail.simple_prompt_label': '精简版提示词（点击复制）：',
        'task_detail.simple_prompt_text': '创建完应用后，向',
        'task_detail.simple_prompt_send': '发送post格式的json数据',
        'task_detail.copy': '复制',
        'task_detail.data_query_tip': '数据查询功能：直接访问上面的URL就能看到已收集的数据，可以用它继续制作实时反馈排名页面。',
        'task_detail.full_prompt_label': '完整版提示词：',
        'task_detail.expand_collapse': '展开/收起',
        
        # Dashboard代码示例
        'dashboard.code_example_field': '字段',
        'dashboard.code_example_value': '值',
        'dashboard.code_example_submitting': '提交中...',
        'dashboard.code_example_success': '提交成功',
        'dashboard.code_example_failed': '提交失败',
        'dashboard.code_example_comment': '生成应用后，产生的数据用以下方法传到服务器：',
        
        # Download Report页面
        'download_report.title': '分析报告',
        'download_report.created_at': '创建时间：',
        'download_report.no_report': '暂无分析报告',
        'download_report.no_report_desc': '此任务尚未生成分析报告或报告文件丢失。',
        'download_report.generate_report': '请点击"智能分析"按钮生成新的分析报告。',

        # Analyze页面
        'analyze.title': '数据分析',
        'analyze.smart_analyze': '智能分析',
        'analyze.back_detail': '返回详情',
        'analyze.overview': '数据概览',
        'analyze.total_submissions': '总提交数量',
        'analyze.earliest_submission': '最早提交时间',
        'analyze.latest_submission': '最新提交时间',
        'analyze.no_data': '暂无数据',
        'analyze.daily_stats': '每日提交统计',
        'analyze.date': '日期',
        'analyze.submission_count': '提交数量',
        'analyze.not_enough_data': '暂无足够数据进行统计',
        'analyze.not_enough_data_desc': '当有更多提交数据时，将显示每日提交统计信息',
        'analyze.export_section': '数据导出',
        'analyze.export_desc': '导出数据以进行更详细的分析或存档：',
        'analyze.export_csv': '导出为CSV文件',
        'analyze.csv_hint': 'CSV文件可以用Excel、Google Sheets或其他电子表格软件打开',

        # Smart Analyze页面
        'smart_analyze.title': '智能分析',
        'smart_analyze.back_to_task': '返回任务详情',
        'smart_analyze.header': '智能分析',
        'smart_analyze.processing_title': '正在生成报告，请稍候...',
        'smart_analyze.processing_tip': '分析过程不会超过两分钟，完成后会自动跳转至报告页面',
        'smart_analyze.waited': '已等待',
        'smart_analyze.seconds': '秒',
        'smart_analyze.current_model': '当前使用',
        'smart_analyze.model_not_configured': '未配置',
        'smart_analyze.change_api_token': '修改API Token',
        'smart_analyze.important_tip': '重要提示：模型输入内容的token有限制，如果数据量太大，不会全部读取数据，只是做部分读取。您也可以自己手动添加数据到提示词中。',
        'smart_analyze.error': '错误',
        'smart_analyze.go_to_config': '前往配置页面',
        'smart_analyze.generated_report_tip': '以下为已生成的分析报告，您可以重新生成报告以获得新的分析结果。',
        'smart_analyze.current_report': '当前分析报告',
        'smart_analyze.download_report': '下载报告',
        'smart_analyze.upload_html_tip': '提示：如果您已经生成了HTML网页，请上传到任务中，以便AI进行更深入的分析。',
        'smart_analyze.template_settings': '提示词模板设置',
        'smart_analyze.template_desc': '您可以在这里设置提示词模板（不包含数据部分）。每次生成报告时，系统会自动将最新数据插入到模板中。在模板中使用 {DATA_SECTION} 作为数据占位符，如果不使用占位符，数据将自动追加到模板末尾。',
        'smart_analyze.template_label': '提示词模板：',
        'smart_analyze.template_placeholder': '你是一个数据分析专家，请基于以下表单数据提供详细的分析报告：\n\n{DATA_SECTION}\n\n请提供一个全面的数据分析报告，包括但不限于：\n1. 数据概览：总提交量、关键数据分布、字段类型统计\n2. 主要发现：数据中的趋势、模式、异常和相关性\n3. 深入分析：基于数据的详细洞察，包括分布特征、集中趋势、离散程度等\n4. 建议和结论：基于分析结果的实用建议和改进方向\n\n请以中文撰写报告，使用Markdown格式，包括适当的标题、列表和表格来增强可读性。',
        'smart_analyze.template_hint': '提示：使用 {DATA_SECTION} 占位符来指定数据插入位置，如果不使用占位符，数据将追加到模板末尾。',
        'smart_analyze.save_template': '保存模板',
        'smart_analyze.regenerate_title': '重新生成报告（可编辑完整提示词）',
        'smart_analyze.regenerate_desc': '下方显示的是完整的提示词（包含数据部分），您可以直接修改后点击按钮重新生成报告：',
        'smart_analyze.regenerate_btn': '重新生成报告',
        'smart_analyze.wait_tip': '分析可能需要几分钟时间，请耐心等待，本页将直接显示结果。',
        'smart_analyze.prompt_edit_title': '提示词编辑',
        'smart_analyze.prompt_edit_desc': '下方显示的是完整的提示词（包含数据部分），您可以查看和修改后开始生成分析报告：',
        'smart_analyze.start_generate': '开始生成报告',
        'smart_analyze.report_generated_at': '报告生成时间：',
        'smart_analyze.report_done': '✅ 报告已生成并展示。',
        'smart_analyze.generate_failed': '生成失败：',
        'smart_analyze.unknown_error': '未知错误',
    },
    'en': {
        # 导航栏
        'nav.home': 'Home',
        'nav.docs': 'Documentation',
        'nav.tutorials': 'Tutorials',
        'nav.cases': 'Showcase',
        'nav.community': 'Community',
        'nav.dashboard': 'Dashboard',
        'nav.create_task': 'Create Task',
        'nav.admin': 'Admin',
        'nav.login': 'Login',
        'nav.register': 'Register',
        'nav.profile': 'Profile',
        'nav.logout': 'Logout',
        'nav.admin_panel': 'Admin Panel',
        
        # 首页
        'home.welcome': 'Welcome to QuickForm',
        'home.subtitle': 'Simple and efficient form data collection system designed for AI-generated interactive web pages',
        'home.quick_start': 'Quick Start',
        'home.step1': '1. Register an account or log in',
        'home.step2': '2. Create a new data task and get a unique URL',
        'home.step3': '3. Integrate the URL into your web page to receive form submissions',
        'home.step4': '4. View and analyze collected data in the dashboard',
        'home.enter_dashboard': 'Go to Dashboard',
        'home.register_now': 'Register Now',
        'home.login': 'Already have an account? Login',
        'home.about': 'About QuickForm',
        'home.about_intro': 'QuickForm is a web-based intelligent form management service developed jointly by Wenzhou Science and Technology High School AI Innovation Center and Wenzhou University. It simplifies the entire process of data collection, analysis, and report generation. Key features include:',
        'home.form_management': 'Form Management',
        'home.form_management_desc': 'Supports creating custom forms with multiple question types (multiple choice, fill-in-the-blank, essay, etc.). Users can flexibly edit and manage form content, view form details and statistics.',
        'home.data_collection': 'Data Collection',
        'home.data_collection_desc': 'Generates unique URL addresses to associate AI-generated interactive web pages or static forms with the QuickForm system, enabling centralized data collection. User-submitted data is stored in real-time for subsequent processing.',
        'home.data_analysis': 'Data Analysis',
        'home.data_analysis_desc': 'Features intelligent analysis capabilities that automatically identify trends, patterns, and key insights in data, generating visualization charts (bar charts, pie charts, line charts, etc.) and data summaries to help users quickly understand data distribution and characteristics.',
        'home.report_generation': 'Report Generation',
        'home.report_generation_desc': 'Automatically generates detailed HTML-format reports based on analysis results, supports custom report templates and styles. Users can download or save reports for teaching evaluation, research analysis, and other scenarios.',
        'home.ai_integration': 'AI Integration',
        'home.ai_integration_desc': 'Combines AI technology for deep data analysis, providing intelligent insights and suggestions, such as automatically identifying students\' learning weaknesses, predicting learning outcomes, etc., to help teachers optimize teaching strategies.',
        'home.applicable_scenarios': 'QuickForm is suitable for various scenarios including education (classroom quizzes, learning assessments), market research, questionnaires, and more. It is particularly suitable for scenarios that require rapid collection and analysis of large amounts of data, helping users efficiently complete data management tasks.',
        
        # 通用
        'common.loading': 'Loading...',
        'common.submit': 'Submit',
        'common.cancel': 'Cancel',
        'common.confirm': 'Confirm',
        'common.delete': 'Delete',
        'common.edit': 'Edit',
        'common.view': 'View',
        'common.save': 'Save',
        'common.back': 'Back',
        'common.close': 'Close',
        'common.search': 'Search',
        'common.filter': 'Filter',
        'common.actions': 'Actions',
        'common.status': 'Status',
        'common.created_at': 'Created At',
        'common.updated_at': 'Updated At',
        
        # 页面占位
        'page.coming_soon': 'Content coming soon...',
        'page.under_construction': 'Under construction...',
        
        # 语言切换
        'lang.switch': 'Language',
        'lang.chinese': '中文',
        'lang.english': 'English',
        
        # 通用（视频相关）
        'common.browser_not_support_video': 'Your browser does not support video playback.',
        
        # Base模板
        'base.home': 'Home',
        'base.title': 'QuickForm - Simple Form Data Collection System',
        'base.toggle_nav': 'Toggle navigation',
        'base.footer': 'Simple Form Data Collection System',
        'base.close': 'Close',
        'base.copy': 'Copy',
        'base.copied': 'Copied',
        
        # Dashboard页面
        'dashboard.title': 'Dashboard',
        'dashboard.my_tasks': 'My Data Tasks',
        'dashboard.task_list': 'Task List',
        'dashboard.certified_teacher': 'Certified Teacher',
        'dashboard.task_count_unlimited': 'Task creation: Unlimited (currently {count} tasks)',
        'dashboard.task_count': 'You have created {current} / {limit} tasks',
        'dashboard.reached_limit': 'Limit reached',
        'dashboard.create_new_task': 'Create New Task',
        'dashboard.no_description': 'No description',
        'dashboard.created_at': 'Created At',
        'dashboard.submission_count': 'Submissions',
        'dashboard.data_url': 'Data API URL',
        'dashboard.view_post_prompt': 'View POST Prompt',
        'dashboard.post_instruction': 'After generating the application, submit data to the following URL via POST:',
        'dashboard.post_instruction_detail': 'After generating the application, send the generated data to the server using the following method:',
        'dashboard.copy_prompt': 'Copy Prompt',
        'dashboard.view_detail': 'View Details',
        'dashboard.export': 'Export',
        'dashboard.analyze': 'Analyze',
        'dashboard.confirm_delete': 'Confirm Delete',
        'dashboard.delete_confirm_message': 'Are you sure you want to delete task "{title}"? This action cannot be undone, and all related submission data will also be deleted.',
        'dashboard.confirm_delete_btn': 'Confirm Delete',
        'dashboard.no_tasks': 'No data tasks created yet',
        'dashboard.no_tasks_desc': 'Click the button below to create your first data task',
        'dashboard.create_task': 'Create Task',
        
        # Login页面
        'login.title': 'Login',
        'login.header': 'User Login',
        'login.username': 'Username',
        'login.username_placeholder': 'Please enter your username',
        'login.password': 'Password',
        'login.password_placeholder': 'Please enter your password',
        'login.remember': 'Remember me',
        'login.submit': 'Login',
        'login.no_account': "Don't have an account?",
        'login.register_link': 'Register now',
        
        # Register页面
        'register.title': 'Register',
        'register.header': 'User Registration',
        'register.username': 'Username',
        'register.username_placeholder': 'Please enter username',
        'register.email': 'Email',
        'register.email_placeholder': 'Please enter email address',
        'register.school': 'School',
        'register.school_placeholder': 'Please enter school name',
        'register.phone': 'Phone',
        'register.phone_placeholder': 'Please enter 11-digit phone number',
        'register.phone_hint': 'Please enter 11-digit phone number (starts with 1, second digit is 3-9)',
        'register.password': 'Password',
        'register.password_placeholder': 'Please enter password',
        'register.privacy_note': 'Privacy Notice:',
        'register.privacy_desc': 'The above information is only used for future update notifications or communication purposes and will not be disclosed.',
        'register.submit': 'Register',
        'register.has_account': 'Already have an account?',
        'register.login_link': 'Login now',
        'register.required': '*',
        
        # Create Task页面
        'create_task.title': 'Create Task',
        'create_task.header': 'Create Data Task',
        'create_task.task_title': 'Task Title',
        'create_task.task_title_placeholder': 'Please enter task title',
        'create_task.task_title_hint': 'Please set a descriptive title for your data collection task',
        'create_task.description': 'Task Description (Optional)',
        'create_task.description_placeholder': 'Please enter task description',
        'create_task.description_hint': 'Adding a description can help you better manage and identify different tasks',
        'create_task.after_create': 'After creating the task, you will get:',
        'create_task.after_create_item1': 'A unique submission URL to receive form data',
        'create_task.after_create_item2': 'Data management and analysis tools',
        'create_task.after_create_item3': 'Data export functionality',
        'create_task.after_create_item4': 'File management capabilities (uploaded files will be associated with the task)',
        'create_task.submit': 'Create Task',
        'create_task.guide_title': 'Usage Guide',
        'create_task.how_to_use': 'How to use the submission URL in your web page:',
        'create_task.html_example': 'HTML Form Example',
        'create_task.js_example': 'JavaScript Submission Example',
        
        # Profile页面
        'profile.title': 'Profile',
        'profile.header': 'Profile Settings',
        'profile.certified': 'Certified Teacher:',
        'profile.certified_desc': 'Your account has completed teacher identity verification. Task creation is no longer limited, and uploaded HTML pages will be automatically publicly accessible.',
        'profile.certified_at': 'Certified at:',
        'profile.cert_reviewing': 'Certification Under Review:',
        'profile.cert_reviewing_desc': 'We received your certification materials on {time}. Please wait patiently for administrator review.',
        'profile.view_detail': 'View Details',
        'profile.cert_rejected': 'Certification Not Approved:',
        'profile.cert_rejected_desc': 'Administrator feedback: {note}. Please prepare more sufficient materials and resubmit.',
        'profile.reapply': 'Reapply for Certification',
        'profile.not_certified': 'Not Certified:',
        'profile.not_certified_desc': 'Submitting teacher identity verification can remove task quantity limits and skip manual HTML page review.',
        'profile.apply_cert': 'Apply for Certification',
        'profile.personal_info': 'Personal Information',
        'profile.ai_config': 'AI Configuration',
        'profile.change_password': 'Change Password',
        'profile.username': 'Username',
        'profile.email': 'Email',
        'profile.school': 'School',
        'profile.phone': 'Phone',
        'profile.phone_hint': 'Please enter 11-digit phone number',
        'profile.save_info': 'Save Personal Information',
        'profile.select_model': 'Select AI Model',
        'profile.model_chat_server': 'Chat Server (Default)',
        'profile.model_deepseek': 'DeepSeek',
        'profile.model_doubao': 'Doubao',
        'profile.model_qwen': 'Alibaba Cloud Qwen',
        'profile.chat_server_config': 'Chat Server Configuration',
        'profile.api_url': 'API URL (Optional)',
        'profile.api_url_placeholder': 'e.g., https://your.chatserver/api/chat',
        'profile.api_url_hint': 'Leave blank to use system default',
        'profile.api_token': 'API Token (Optional)',
        'profile.api_token_placeholder': 'Please enter your exclusive Token',
        'profile.api_token_hint': 'Leave blank to use system default Token',
        'profile.deepseek_config': 'DeepSeek Configuration',
        'profile.deepseek_api_key': 'API Key',
        'profile.deepseek_api_key_hint': 'Please enter your DeepSeek API key',
        'profile.doubao_config': 'Doubao Configuration',
        'profile.doubao_api_key': 'API Key',
        'profile.qwen_config': 'Alibaba Cloud Qwen Configuration',
        'profile.qwen_api_key': 'API Key',
        'profile.qwen_api_key_hint': 'Please enter your Alibaba Cloud Qwen API key',
        'profile.save_config': 'Save Configuration',
        'profile.api_test': 'API Connectivity Test',
        'profile.api_test_desc': 'After saving the configuration, you can use the quick test button below to confirm if the model interface can respond normally.',
        'profile.test_prompt': 'Test Prompt (Optional)',
        'profile.test_prompt_placeholder': 'e.g., Please reply "OK" for connectivity test.',
        'profile.test_api': 'Test Interface',
        'profile.testing': 'Testing...',
        'profile.test_note': 'If you modified the configuration above, please click "Save Configuration" first, then perform the connectivity test.',
        'profile.current_password': 'Current Password',
        'profile.new_password': 'New Password',
        'profile.new_password_hint': 'Password must be at least 6 characters',
        'profile.confirm_password': 'Confirm New Password',
        'profile.change_password_btn': 'Change Password',
        'profile.config_guide_title': 'Configuration Instructions',
        'profile.config_guide_desc1': 'After configuring the AI model, you can use the intelligent analysis feature on the task analysis page. Intelligent analysis will generate detailed analysis reports based on your form data and attachment content.',
        'profile.config_guide_desc2': 'Please keep your API keys secure and avoid disclosure. Data will be sent to the AI model for analysis through secure channels.',
        
        # JavaScript消息
        'js.only_html': 'Only HTML or HTM format files are supported',
        'js.file_too_large': 'File size exceeds 16MB limit',
        'js.file_selected': 'Selected',
        'js.upload_failed': 'Upload failed',
        'js.upload_failed_check': 'Upload failed, please check file format and size',
        'js.http_error': 'Upload failed, HTTP status code',
        'js.network_error': 'Network error, upload failed. Please check your network connection and try again.',
        'js.upload_timeout': 'Upload timeout, please check your network connection and try again.',
        'js.copy_success': '✅ Copied',
        'js.test_failed': 'Test failed, please check configuration',
        'js.test_success': 'Request successful',
        'js.test_error': 'Test failed, please try again later',
        'js.interface_no_response': 'Interface no response',
        
        # Task Detail页面
        'task_detail.export_data': 'Export Data',
        'task_detail.analyze': 'Data Analysis',
        'task_detail.edit_task': 'Edit Task',
        'task_detail.back_to_list': 'Back to List',
        'task_detail.task_info': 'Task Information',
        'task_detail.created_at': 'Created At',
        'task_detail.submission_count': 'Submissions',
        'task_detail.description': 'Task Description',
        'task_detail.select_file': 'Select File',
        'task_detail.uploaded_file': 'Uploaded File',
        'task_detail.remove_file': 'Remove this file',
        'task_detail.drag_drop': 'Drag file here to upload, or',
        'task_detail.html_file': 'HTML File',
        'task_detail.show_qrcode': 'Show QR Code',
        'task_detail.review_rejected': 'Page review result: Rejected. Reason:',
        'task_detail.review_pending': 'Page is under review and temporarily not publicly accessible. Review does not affect data collection; you can open the page locally in your browser to submit data normally. After completing teacher certification in your profile, all uploaded pages will be exempt from review.',
        'task_detail.no_html_file': 'No HTML file uploaded yet. To upload, please go to the',
        'task_detail.edit_task_link': 'Edit Task',
        'task_detail.page': 'page.',
        'task_detail.rate_limit_title': 'blocked records',
        'task_detail.rate_limit_alert': 'System Alert: Abnormal submissions from some IPs in a short time have been automatically blocked temporarily.',
        'task_detail.post_prompt_title': 'Submit Code Prompt',
        'task_detail.post_instruction': 'After generating the application, submit data to the following URL via POST:',
        'task_detail.data_url_label': 'Data API URL:',
        'task_detail.copy_url': 'Copy URL',
        'task_detail.simple_prompt_label': 'Simple Prompt (click to copy):',
        'task_detail.simple_prompt_text': 'After creating the application, send',
        'task_detail.simple_prompt_send': 'POST format JSON data to',
        'task_detail.copy': 'Copy',
        'task_detail.data_query_tip': 'Data Query: You can directly access this URL to view collected data, and use it to create real-time feedback ranking pages.',
        'task_detail.full_prompt_label': 'Full Prompt (collapsed by default, click to expand/copy):',
        'task_detail.expand_collapse': 'Expand/Collapse',
        
        # Dashboard代码示例
        'dashboard.code_example_field': 'Field',
        'dashboard.code_example_value': 'Value',
        'dashboard.code_example_submitting': 'Submitting...',
        'dashboard.code_example_success': 'Submit successful',
        'dashboard.code_example_failed': 'Submit failed',
        'dashboard.code_example_comment': 'After generating the application, send the generated data to the server using the following method:',
        
        # Download Report页面
        'download_report.title': 'Analysis Report',
        'download_report.created_at': 'Created At:',
        'download_report.no_report': 'No Analysis Report',
        'download_report.no_report_desc': 'This task has not generated an analysis report or the report file is missing.',
        'download_report.generate_report': 'Please click the "Smart Analyze" button to generate a new analysis report.',

        # Analyze页面
        'analyze.title': 'Data Analysis',
        'analyze.smart_analyze': 'Smart Analyze',
        'analyze.back_detail': 'Back to Details',
        'analyze.overview': 'Overview',
        'analyze.total_submissions': 'Total Submissions',
        'analyze.earliest_submission': 'Earliest Submission',
        'analyze.latest_submission': 'Latest Submission',
        'analyze.no_data': 'No data',
        'analyze.daily_stats': 'Daily Submission Stats',
        'analyze.date': 'Date',
        'analyze.submission_count': 'Submissions',
        'analyze.not_enough_data': 'Not enough data for statistics',
        'analyze.not_enough_data_desc': 'Daily submission statistics will appear when there is more data.',
        'analyze.export_section': 'Export Data',
        'analyze.export_desc': 'Export data for deeper analysis or archiving:',
        'analyze.export_csv': 'Export as CSV',
        'analyze.csv_hint': 'CSV files can be opened with Excel, Google Sheets, or other spreadsheet software.',

        # Smart Analyze页面
        'smart_analyze.title': 'Smart Analyze',
        'smart_analyze.back_to_task': 'Back to Task Details',
        'smart_analyze.header': 'Smart Analyze',
        'smart_analyze.processing_title': 'Generating report, please wait...',
        'smart_analyze.processing_tip': 'The analysis should take no more than 2 minutes. You will be redirected to the report page when it is ready.',
        'smart_analyze.waited': 'Waited',
        'smart_analyze.seconds': 'seconds',
        'smart_analyze.current_model': 'Current model:',
        'smart_analyze.model_not_configured': 'Not configured',
        'smart_analyze.change_api_token': 'Update API Token',
        'smart_analyze.important_tip': 'Important: the model input has a token limit. If the data volume is too large, not all data will be read. You can also manually add data into the prompt.',
        'smart_analyze.error': 'Error',
        'smart_analyze.go_to_config': 'Go to settings',
        'smart_analyze.generated_report_tip': 'Here is the generated analysis report. You can regenerate it to get new results.',
        'smart_analyze.current_report': 'Current Report',
        'smart_analyze.download_report': 'Download Report',
        'smart_analyze.upload_html_tip': 'Tip: If you have generated an HTML page, upload it to the task so the AI can perform deeper analysis.',
        'smart_analyze.template_settings': 'Prompt Template Settings',
        'smart_analyze.template_desc': 'Set the prompt template here (excluding the data section). Each time a report is generated, the latest data will be inserted automatically. Use {DATA_SECTION} as the data placeholder. If you do not use the placeholder, the data will be appended to the end of the template.',
        'smart_analyze.template_label': 'Prompt template:',
        'smart_analyze.template_placeholder': 'You are a data analysis expert. Please provide a detailed analysis report based on the following form data:\n\n{DATA_SECTION}\n\nPlease provide a comprehensive report including but not limited to:\n1. Overview: total submissions, key distributions, field type statistics\n2. Key findings: trends, patterns, anomalies, and correlations\n3. Deep analysis: distribution characteristics, central tendency, dispersion, etc.\n4. Recommendations and conclusions\n\nWrite the report in English using Markdown, with appropriate headings, lists, and tables for readability.',
        'smart_analyze.template_hint': 'Tip: use the {DATA_SECTION} placeholder to specify where data is inserted. If not used, data will be appended to the end.',
        'smart_analyze.save_template': 'Save Template',
        'smart_analyze.regenerate_title': 'Regenerate Report (edit full prompt)',
        'smart_analyze.regenerate_desc': 'Below is the full prompt (including data). You can edit it and regenerate the report:',
        'smart_analyze.regenerate_btn': 'Regenerate Report',
        'smart_analyze.wait_tip': 'Analysis may take a few minutes. Please wait; results will be shown on this page.',
        'smart_analyze.prompt_edit_title': 'Prompt Editor',
        'smart_analyze.prompt_edit_desc': 'Below is the full prompt (including data). Review/edit it and start generating the report:',
        'smart_analyze.start_generate': 'Generate Report',
        'smart_analyze.report_generated_at': 'Report generated at:',
        'smart_analyze.report_done': '✅ Report generated and displayed.',
        'smart_analyze.generate_failed': 'Generation failed: ',
        'smart_analyze.unknown_error': 'Unknown error',
    }
}


def get_locale():
    """获取当前语言"""
    return session.get('locale', 'zh')


def set_locale(locale):
    """设置当前语言"""
    if locale in ['zh', 'en']:
        session['locale'] = locale
        return True
    return False


def translate(key, locale=None):
    """翻译文本"""
    if locale is None:
        locale = get_locale()
    
    translations = TRANSLATIONS.get(locale, TRANSLATIONS['zh'])
    return translations.get(key, key)


def get_available_locales():
    """获取可用的语言列表"""
    return ['zh', 'en']


def get_locale_name(locale):
    """获取语言显示名称"""
    names = {
        'zh': '中文',
        'en': 'English'
    }
    return names.get(locale, locale)
